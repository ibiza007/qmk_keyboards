
#include QMK_KEYBOARD_H
#include "me.h"

#define _QWERTY 0
#define _FN 1
#define _SPACEFN 2
#define _GAMING 3
#define _BLANK 4

#define SPCFN LT(_SPACEFN, KC_SPACE)
#define CTLESC CTL_T(KC_ESC)


const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    [_QWERTY] = LAYOUT_wrapper(
      KC_ESC,  KC_GRV,  _________________QWERTY_L1_________________, _________________QWERTY_R1_________________, KC_MINS,    KC_EQL,     KC_DEL,     KC_BSPC,
      KC_PGUP, KC_TAB,  _________________QWERTY_L2_________________, _________________QWERTY_R2_________________, KC_LBRC,    KC_RBRC,    KC_BSLS,
      KC_PGDN  CTLESC,  _________________QWERTY_L3_________________, _________________QWERTY_R3_________________, KC_QUOT,            KC_ENT,
               KC_LSFT, _________________QWERTY_L4_________________, _________________QWERTY_R4_________________,             KC_RSFT,    MO(1),
               KC_LCTL,          KC_LALT, SPCFN, KC_ENT,                     SPCFN,                                              KC_RGUI,       LT(_FN, KC_RCTL)
    ),
    [_FN] = LAYOUT_WKL_wrapper(
      _______, ____________________FN_L1__________________, ____________________FN_R1__________________, _______, _______, _______, _______,
      _______, ____________________FN_L2__________________, ____________________FN_R2__________________, _______, _______, _______,
      KC_CAPS, ____________________FN_L3__________________, ____________________FN_R3__________________, _______,      _______,
      _______, ____________________FN_L4__________________, ____________________FN_R4__________________,             _______, _______,
      _______,          _______, _______, _______,          _______,                                              _______,          _______
    ),
    [_SPACEFN] = LAYOUT_WKL_wrapper(
      _______, _________________SPACEFN_L1________________, _________________SPACEFN_R1________________, _______, _______, _______,_______,
      _______, _________________SPACEFN_L2________________, _________________SPACEFN_R2________________, _______, _______, _______,
      _______, _________________SPACEFN_L3________________, _________________SPACEFN_R3________________, _______,       _______,
      _______, _________________SPACEFN_L4________________, _________________SPACEFN_R4________________,             _______, _______,
      _______,          _______, _______, _______,          _______,                                              _______,          _______
    ),
    [_GAMING] = LAYOUT_WKL_wrapper(
      _______, _________________GAMING_L1_________________, _________________GAMING_R1_________________, _______, _______, _______,_______,
      _______, _________________GAMING_L2_________________, _________________GAMING_R2_________________, _______, _______, _______,
      _______, _________________GAMING_L3_________________, _________________GAMING_R3_________________, _______,       _______,
      _______, _________________GAMING_L4_________________, _________________GAMING_R4_________________,             _______, _______,
      _______,          _______, _______, _______,          _______,                                              _______,          _______
    ),
    [_BLANK] = LAYOUT_WKL_wrapper(
      _______, ___________________BLANK___________________, ___________________BLANK___________________, _______, _______, _______,_______,
      _______, ___________________BLANK___________________, ___________________BLANK___________________, _______, _______, _______,
      _______, ___________________BLANK___________________, ___________________BLANK___________________, _______,       _______,
      _______, ___________________BLANK___________________, ___________________BLANK___________________,             _______, _______,
      _______,          _______, _______, _______,          _______,                                              _______,          _______
    )
};

#ifdef USE_LEDS_FOR_LAYERS
// example of how to use LEDs as layer indicators
static uint8_t top = 1;
static uint8_t middle = 0;
static uint8_t bottom = 0;

uint32_t layer_state_set_user(uint32_t state) {
    switch (biton32(state)) {
        case _FN:
            middle = 1;
            break;
        case _GAMING:
            top = 1;
            break;
        default:
            break;
    }
    return state;
}

// override kb level function
bool led_update_user(led_t usb_led) {
    writePin(B1, !top);
    writePin(B2, !middle);
    writePin(B3, !bottom);
    return false; // we are using LEDs for something else override kb
}
#endif
